<!DOCTYPE html>
		<head>
			<%= stylesheet_link_tag "menus", media: "all", "data-turbolinks-track" => true%>
			<%= csrf_meta_tags %>	
			<script type="text/javascript">
				function altRows(id)
				{
					if(document.getElementsByTagName)
					{
						var table = document.getElementById(id);	
						var rows = table.getElementsByTagName("tr");
						for(i = 0; i < rows.length; i++)
						{
							if(i % 2 == 0)
							{
							rows[i].className = "evenRowColor";
							}
							else
							{
								rows[i].className = "oddRowColor";
							}
						}
					}
				}
				window.onload=function()
				{
				altRows('alternatecolor');
				}
			</script>	
	</head>

<div class="container">
	<table border="3">
		  <table class="myTableClass" id="alternatecolor">
  			<thead>
	<h1>Listing Menu</h1>
      <tr>
        <th>Menu</th>
        <th>Ingredients</th>
       <% if can? :read, User%> <th>Price</th><% end %>
       <% if can? :manage, User %> <th>Admin</th> <% end %>
      </tr>
    </thead>

		<% @menus.each do |menu| %>

			<tbody>
				<tr>
					<th><%= image_tag(menu.image_url, :size => "140x110") %>
						<p><%=menu.foodItem %></p>
					</th>
					<th><%= sanitize(menu.description) %></th>
					<% if can? :read, User%>
					<th> <span class="price"><%= number_to_currency(menu.price) %></span>
						<%= button_to 'Add to Cart', line_items_path(menu_id: menu), :class => "btn btn-primary btn-sm" %>
					</th> <% end %>
		<% if can? :manage, User %><th class="list_actions">
			<%=link_to'Show', menu %><br/>
			<%=link_to'Edit',edit_menu_path(menu)%><br/>
			<%=link_to'Destroy', menu, method: :delete, data:{confirm:'Are you sure?'} %>
		</th><% end %>
				</tr>
			<tbody>					

		<% end %>


	</div>
</div>
</table>
</table>
 <%= will_paginate @menus, 'data-no-turbolink' => true %>
 
   <% if can? :create, Menu %>
	<%= link_to 'New Menu', new_menu_path %>
	<% end %>
	<br />
	<script>
  $(document).ready(function(){
      // page is now ready, initialize the calendar...
      $('#new_event').click(function(event) {
        event.preventDefault();
        var url = $(this).attr('href');
        $.ajax({
          url: url,
          beforeSend: function() {
            $('#loading').show();
          },
          complete: function() {
            $('#loading').hide();
          },
          success: function(data) {
            $('#create_event').replaceWith(data['form']);
            $('#create_event_dialog').dialog({
              title: 'New Event',
              modal: true,
              width: 500,
              close: function(event, ui) { $('#create_event_dialog').dialog('destroy') }
            });
          }
        });
      });
	  
      $('#calendar').fullCalendar({
          editable: true,
          header: {
              left: 'prev,next today',
              center: 'title',
              right: 'month,agendaWeek,agendaDay'
          },
          defaultView: 'month',
          height: 500,
          slotMinutes: 15,
                    
          events: '/events.json',
 
          timeFormat: 'h:mm t{ - h:mm t} ',
          dragOpacity: "0.5",
          eventDrop: function(event, dayDelta, minuteDelta, allday, revertFunc){
              if (confirm("Are you sure about this change?")) {
                moveEvent(event, dayDelta, minuteDelta, allDay);
              }
              else {
                revertFunc();
              }
          },
          
          eventResize: function(event, dayDelta, minuteDelta, revertFunc){
//              if (confirm("Are you sure about this change?")) {
                  resizeEvent(event, dayDelta, minuteDelta);
//              }
//              else {
//                  revertFunc();
//              }
          },
          
          eventClick: function(event, jsEvent, view){
              showEventDetails(event);
          },
          
          dayClick: function(date, allDay, jsEvent, view){
            if (allDay) {
              alert('Clicked on the entire day: ' + date);
            }
            else{
              alert('Clicked on the slot: ' + date);
            }
          }
          
      });
  }); 
  
</script>
    <script type="text/javascript" src="js/jquery.js"></script><script type="text/javascript" src="js/jquery-easing-1.3.pack.js"></script><script type="text/javascript" src="js/jquery-easing-compatibility.1.2.pack.js"></script>

<div id="eventlist">
<div id= "calendarback">
  <div id="calendar">
  </div>
</div>
</div>

<br />
<br />
